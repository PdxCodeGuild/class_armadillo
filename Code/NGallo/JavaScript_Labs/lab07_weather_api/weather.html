<!DOCTYPE html>
<html lang="en">

<head>
    <style>

    </style>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="secrets.js"> </script>
    <link href="/owfont-master/css/owfont-regular.css" rel="stylesheet" type="text/css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather API</title>
</head>

<body>
    
    <div id="header">
        <h2>Weather API Lab</h2>
        <i class="owf owf-200"></i>
    </div>
    <div id="weatherOutaput">
        <p>Current time: <span id="time"></span></p>
        <p>Current weather: <span id="weather"></span></p>
        <p>Feels like: <span id="feels_like"></span>Â°</p>
        </div>
        <img id="icon_div" src="">
    </div>
    <div id="footer">
        <h4>Weather App | Nick Gallo | Class_Armadillo &copy2020</h4>
    </div>
    <script>
        navigator.geolocation.getCurrentPosition(position => {
            let userLatitude = position.coords.latitude
            let userLongitude = position.coords.longitude
            let userCoords = [userLatitude, userLongitude]
            // console.log(userCoords)
            let urlApi = `https://api.openweathermap.org/data/2.5/onecall?lat=${userLatitude}&lon=${userLongitude}&exclude=hourly,daily&appid=${weatherApiKey}&units=imperial`


            axios({
                method: 'get',
                url: urlApi,
            }).then((response) => {
                console.log(response)

                let dateTime = response.data.current.dt
                let now = new Date(dateTime * 1000)
                timeDiv = document.getElementById("time")
                timeDiv.innerHTML = now

                let weather = response.data.current.weather[0].description
                weatherDiv = document.getElementById("weather")
                weatherDiv.innerHTML = weather

                let feelsLike = response.data.current.feels_like
                feelsDiv = document.getElementById("feels_like")
                feelsDiv.innerHTML = feelsLike

                let icon = response.data.current.weather[0].icon
                iconDiv = document.getElementById("icon_div")
                iconDiv.setAttribute(`"src"`, `"http://penweathermap.org/img/wn/${icon}.png"`)
                
            })
        }) 
    </script>
</body>

</html>
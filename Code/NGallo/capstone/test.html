<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js">
    </script>
    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css" />

    <style>
        .map_div {
            height: 400px;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
</head>

<body>
    <div header="welcome">
        <h1>hi</h1>
    </div>
    <div class="map_div" id="map">

    </div>
    <script>
        
        L.mapquest.key = 'XjPh6iQIwoGm3c6gEqJgqUkKFUcijmaM';
        var baseLayer = L.mapquest.tileLayer('dark');

        L.mapquest.geocoding().geocode(['Portland, OR'], showMap);

        function showMap(err, data) {
            var map = createMap();
            map.addControl(L.mapquest.control());
            addLayerControl(map);
        }

        function createMap(user_coords) {
            var map = L.mapquest.map('map', {
                center: user_coords,
                zoom: 14,
                layers: baseLayer
            });
            return map;
        }

        function addLayerControl(map) {
            L.control.layers({
                'Map': L.mapquest.tileLayer('map'),
                'Satellite': L.mapquest.tileLayer('satellite'),
                'Hybrid': L.mapquest.tileLayer('hybrid'),
                'Light': L.mapquest.tileLayer('light'),
                'Dark': baseLayer
            }, {}, { position: 'topleft' }).addTo(map);
        }
        navigator.geolocation.getCurrentPosition(position => {
            let user_latitude = position.coords.latitude
            let user_longitude = position.coords.longitude
            let user_coords = [user_latitude, user_longitude]
            console.log(user_coords)
            return user_coords
        })
    </script>
</body>

</html>
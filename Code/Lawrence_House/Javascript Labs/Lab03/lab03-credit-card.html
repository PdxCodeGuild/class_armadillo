<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
    <script>

        // Slice off the last digit. that is the check digit
        let cc_digits = [4, 5, 5, 6, 7, 3, 7, 5, 8, 6, 8, 9, 9, 8, 5, 5]
        let check_digit = cc_digits.pop(-1)


        // Reverse the digits
        cc_digits.reverse()

        for (let i = 0; i < cc_digits.length; i += 2) {
            cc_digits[i] *= 2
        }

        for (let i = 0; i < cc_digits.length; ++i) {
            if (cc_digits[i] > 9) {
                cc_digits[i] -= 9
            }
        }
        
        var sum = cc_digits.reduce(function (a, b) {
            return a + b;
        }, 0);

        alert(cc_digits)


        cc_digits = sum
        

        let last_check = cc_digits % 10

        alert(cc_digits)

        if (check_digit == last_check) {
            alert('valid')
        } else {
            alert('invalid')
        }
    </script>
</body>
</html>